<html>
<meta charset="utf-8">
<head>
	<title>Agenda Pública</title>
<link href='https://fonts.googleapis.com/css?family=Lato:400,300,700,400italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="css/icons.css">
<link rel="stylesheet" type="text/css" href="css/main.css">
<script src="bower_components/handlebars/handlebars.min.js"></script>
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/moment/min/moment.min.js"></script>

<script>
	Handlebars.registerHelper('datum', function(data, formato) {
	  var d = moment(data)
	  console.log(data);
	  return d.format(formato);
	});
		
	$(document).ready(function () {
		$.getJSON("http://0.0.0.0:5000/api/evento", function (data) {
			console.log(data.objects);
			var source = $('#template').html();
			var template = Handlebars.compile(source);   // optional, speeds up future uses
			var rendered = template(data);
  			$('#main').html(rendered);
		});
	 	
	});
</script>

</head>
<body>

<div id="container">

	<div id="header" class="blue">
		<ul class="menu">
			<li class="icon-menu bigicon esq"></li>
			<li class="mes esq">JANEIRO</li>
			<li class="icon-menubola smallicon dir"></li>
			<li class="icon-calendar smallicon dir"></li>
		</ul>
	</div>
	
	<div id="main">

	<script id="template" type="text/x-handlebars-template">
		{{#each objects}}
		<div class="dia">
			<div class="data">
				<div class="numero">{{datum data_inicio "d"}}</div>
				<div class="semana">{{datum data_inicio "ddd"}}</div>
			</div>
			
			<div class="eventos">
				<div class="evento">
					<div class="titulo">{{titulo}}</div>
					<div class="local">{{local}} - {{horario}}</div>
					<ul class="tags">
						{{#tags}}
						<li>{{tag}}</li>
						{{/tags}}
					</ul>
				</div>
			</div>
		</div>
		{{/each}}
		</script>

	</div>
	<div id="footer">
		<div>
			<span>começamos um novo mês<br />veja o que temos na nossa Agenda Pública</span>
		</div>
		<ul class="menu">
			<li class="mes">FEVEREIRO</li>
		</ul>

	</div>

</div>

</body>
</html>